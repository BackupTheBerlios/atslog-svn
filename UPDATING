# ATSlog version @version@ build @buildnumber@ www.atslog.dp.ua  
# Copyright (C) 2003 Denis CyxoB www.yamiyam.dp.ua

ОБНОВЛЕНИЕ с panalog-0.4 до atslog-@version@, а так же любой из версий ATSlog.

1. Скачайте и распакуйте atslog-@version@.tar.gz:
   fetch http://atslog.dp.ua/download/archives/atslog-@version@.tar.gz
   tar vzxfmp atslog-@version@.tar.gz

2. Остановить демона сбора логов:
   /usr/local/etc/rc.d/panaloginit.sh stop
   
3. Постройте новую систему с учетом обновлений. Будет автоматически 
   произведён поиск файлов с предыдущими настройками.
   cd atslog-@version@
   make all

4. Можно внеси изменения по желанию пользователя в новый
   конфигурационный файл:
   ./atslog.conf
   который будет собран с учетом данных из старых конфигурационных файлов,
   имеющихся в системе. Обратите особое внимание на такие параметры как:
     $port
     $speed
     $fastwrite
     $model                                         

5. Деинсталлировать старую версию PanaLog:
   /usr/local/share/panalog/install.sh deinstall
   При деинсталляции текстовые лог-файлы (из /var/log/panalog) НЕ удаляются!

   Деинсталлировать старую версию ATSlog:
   cd /usr/local/share/atslog
   make deinstall
   При деинсталляции текстовые лог-файлы (из /var/log/atslog) НЕ удаляются!

6. Вернуться в директорию с установочными файлами и инсталлировать новую
   версию, учитывая предыдущие настройки:
   make install

7. Данные за текущий день из файла calls.log, которые ещё _не были внесены_
   в базы SQL сервера перенесите (не скопируйте, а именно перенесите) в файл
   currentcalls.log. Этот файл находится в директории с остальными текстовыми
   лог-файлами и служит для хранения текущих сеансов звонков.

8. Обязательно в базы SQL сервера нужно заново внести данные из текстовых
   лог-файлов. Это связано с изменением формата SQL таблиц.
   Сделать это можно следующим образом:

   atslogmaster cleardb # Очищаем таблицы от старой информации.
   atslogmaster alltodb # Запишем информацию о звонках из текстовых лог-файлов.

9. Запустить демона сбора логов.
   atslogmaster start

