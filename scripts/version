#!/bin/sh
# ATSlog version @version@ build @buildnumber@ www.atslog.dp.ua
# Copyright (C) 2003 Denis CyxoB www.yamiyam.dp.ua
#

echo Prepare package version and build

for ac_prg in sed find [
do
    echo -n "checking if system file \"$ac_prg\" is existing: "
    for ac_dir in /bin /sbin /usr/bin /usr/sbin /usr/local/bin /usr/local/sbin
    do
        if [ -e "$ac_dir/$ac_prg" ]; then
            echo "YES"
	    FILE_NOT_EXISTS=0
	    break;
	else
	    FILE_NOT_EXISTS=1
        fi
    done
    if [ $FILE_NOT_EXISTS -ne 0 ]; then
        echo "NONE"
        echo "prepare aborting!"
        exit 1
    fi
done

if [ -r ./version.inc ];then
    . ./version.inc
else
    echo Not see version.inc file
    exit 1
fi

if [ -z $ver -o -z $build ];then
    echo Number of the version and the build not found!
    exit 1
else
    echo prepare package for version $ver and build $build
    find ./ -type f -exec sed -i '' "s/@version@/$ver/g" {} \;                                              
    find ./ -type f -exec sed -i '' "s/@buildnumber@/$build/g" {} \;                                        
fi
