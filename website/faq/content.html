<div class="header">ЧаВО. Часто задаваемые ВОпросы. FAQ.</div>
<ul>
<li><b>ATSlog работает, но в текстовый лог-файл сыпется непонятный мусор вместо строк с описанием звонков. В чём причина?</b></li>
<i>Объяснение причин:</i><br>
<ul>
<li>Скорость порта АТС и скорость порта на компьютере не согласованы.</li>
</ul>
<i>Решение задачи:</i><br>
<ul>
<li>
Измените параметр <tt>$speed</tt> в конфигурационном файле <tt>/usr/local/etc/atslog.conf</tt>
Смотрите также остальные параметры настройки порта, а именно <tt>$charsize, $parity, $stopbits</tt>.
Параметры порта можно уточнить в документации к АТС
</li>
</ul>
<br>
<li><b>При записи информации из текстового лог-файла в БД SQL сервера программа выдаёт следующее сообщение:</b>
<br><tt>Внимание! Не было передано SQL серверу ни одной записи из сканируемого
лог-файла. Возможно, это вызвано ошибкой.</tt></li>
<i>Объяснение причин:</i>
<ul>
<li>Не верно указана модель АТС в параметре $model конфигурационного файла.
<li>Так же возможен случай, когда текстовый лог-файл не содержит строк с данными для АТС.</li>
</ul>
</li>
<br>
<li><b>Как можно импортировать данные в ATSlog из сохранённого ранее текстового лог-файла?</b></li>
<i>Решение задачи:</i>
<ul>
<li>Копировать данные в файл <tt>/var/log/atslog/calls.log</tt> (это файл по умолчанию; более точно смотрите параметр <tt>$callslogfile</tt> конфигурационного файла <tt>/usr/local/etc/atslog.conf</tt>)</li>
<li>Используйте функцию записи всех звонков в базу SQL сервера:
<pre>
# atslogmaster alltodb
</pre>
</li>
</ul>
<li><b>ATSlog запускается, но ничего не происходит, и данные с мини-АТС не записываются. В списке процессов присутствует два демона atslogd. В чём причина?</b></li>
<i>Объяснение причин:</i>
<ul>
<li>Нет связи демона с АТС.</li>
</ul>
<i>Решение задачи:</i>
<ul>
<li>Решение проблемы: проверьте параметр <tt>$port</tt> конфигурационного файла <tt>/usr/local/etc/atslog.conf</tt> или убедитесь в правильности соединения кабеля от мини-АТС к компьютеру. Отсутствие связи также может быть вызвано неправильной распайкой кабеля.</li>
</ul><br>
<li><b>При инсталляции программы с использованием MySQL сервера на другой машине, отличной от 'localhost' ATSlog выдаёт следующее сообщение:</b>
<pre>
ERROR 1130: Host 'atslog.server.com' is not allowed to connect to this MySQL server.
</pre>
<b>Или такое:</b>
<pre>
ERROR 1045: Access denied for user: 'root@atslog.server.com' (Using password: YES)
</pre>
<b>В результате ATSlog не устанавливается/обновляется. В чём причина?</b></li>


<br><i>Объяснение причин:</i>
<ul>
<li>Для работы ATSlog необходимо внести данные в MySQL с привилегиями суперпользователя. По умолчанию вход с правами root возможен только с машины 'localhost'.</li>
</ul>
<i>Решение задачи:</i>
<ul>
<li>Временно расширить права суперпользователя для доступа с хоста 'atslog.server.com'. Для этого:
<pre>
GRANT ALL PRIVILEGES ON * . * TO "root"@"atslog.server.com" IDENTIFIED
BY 'некриптованый_пароль_для_root' WITH GRANT OPTION;
</pre>
После этого можно возобновить инсталляцию.<br>
После инсталляции не забудьте восстановить привилегии пользователя root обратно:<br>
<pre>
DELETE FROM mysql.user WHERE User = "root" AND Host = "atslog.server.com";
DELETE FROM mysql.db WHERE User = "root" AND Host = "atslog.server.com";
DELETE FROM mysql.tables_priv WHERE User = "root" AND Host = "atslog.server.com";
DELETE FROM mysql.columns_priv WHERE User = "root" AND Host = "atslog.server.com";

FLUSH PRIVILEGES;
</pre></li>
</ul>
</ul>