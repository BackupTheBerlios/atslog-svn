<div class="header">Обновление</div>
<p>Обновление с panalog-0.4 до atslog-<? echo $atslogver; ?>, а так же любой из версий ATSlog.</p>

<ol>
<li>Останавливаем демона сбора логов:<p>
Для panalog:
<pre>
# /usr/local/etc/rc.d/panaloginit.sh stop
</pre>
<p>Или для всех версий ATSlog:
<pre>
# atslogmaster stop
</pre>

  <li><p>Скачайте и распакуйте <i><a href="/get/" title="архив ATSlog версии <? echo($atslogver); ?>">atslog-<? echo($atslogver); ?>.tar.gz</a></i>:
<pre>$ fetch <? echo("http://".$_SERVER["SERVER_NAME"]."/download/atslog-$atslogver.tar.gz"); ?>

$ tar vzxfmp atslog-<? echo($atslogver); ?>.tar.gz
</pre>

<li>Постройте новую систему с учетом обновлений. Будет автоматически 
   произведён поиск файлов с предыдущими настройками.
<pre>
$ cd atslog-<? echo $atslogver; ?>

# make all
</pre>
<li>Можно внеси изменения по желанию пользователя в новый
конфигурационный файл <tt>./atslog.conf</tt> , который будет собран с учетом
данных из старых конфигурационных файлов, имеющихся в системе. Обратите особое 
внимание на такие параметры как:  <tt>$port, $speed, $fastwrite, $model</tt>

  <li><p>Деинсталлировать старую версию.
  <p>Для PanaLog:
<pre>
# /usr/local/share/panalog/install.sh deinstall
</pre>
При деинсталляции текстовые лог-файлы (из /var/log/panalog) НЕ удаляются!</p>

   <p>Для ATSlog:
<pre>
# cd /usr/local/share/atslog
# make deinstall
</pre>
При деинсталляции текстовые лог-файлы (из /var/log/atslog) НЕ удаляются!<br><br>
<li>Вернуться в директорию с установочными файлами и инсталлировать новую
версию, учитывая предыдущие настройки:
<pre>
# make install
</pre>
<li>При обновлении с PanaLog до ATSlog данные за текущий день из файла <i>calls.log</i>, которые <u><b>ещё не были внесены</b></u>
   в базы SQL сервера, перенесите (не скопируйте, а именно перенесите) в файл
   currentcalls.log. Этот файл находится в директории с остальными текстовыми
   лог-файлами и служит для хранения текущих сеансов звонков.<tr><tr>
<li>Обязательно в базы SQL сервера нужно заново внести данные из текстовых
   лог-файлов. Это связано с изменением формата SQL таблиц.
   Сделать это можно следующим образом:
<pre>
# atslogmaster cleardb # Очищаем таблицы от старой информации.
# atslogmaster alltodb # Запишем информацию о звонках из текстовых лог-файлов.
</pre>

  <li>Запустить демона сбора логов.
<pre>
# atslogmaster start
</pre>
</ol>
<hr>
<TABLE width="100%" BORDER="0" CELLPADDING="0" CELLSPACING="0">
<TR>
	<TD WIDTH="33%" ALIGN="left" VALIGN="top"><a href="/doc/setup/" title="установка и настройка программы ATSlog" ACCESSKEY="P">Предыдущий</a></TD>
	<TD WIDTH="34%" ALIGN="center" VALIGN="top"><A HREF="/doc/" ACCESSKEY="H">Разделы</A></TD>
	<TD WIDTH="33%" ALIGN="right" VALIGN="top"><a href="/doc/using/" title="использование ATSlog" ACCESSKEY="N">Следующий</a></TD>
</TR>
<TR>
	<TD WIDTH="33%" ALIGN="left" VALIGN="top">Установка и настройка программы</TD>
	<TD WIDTH="34%" ALIGN="center" VALIGN="top">&nbsp;</TD>
	<TD WIDTH="33%" ALIGN="right" VALIGN="top">Использование ATSlog</TD>
</TR>
</TABLE>
